# 10.3 코드 분할 

**너무 큰 코드라고 판단되면 일정 수준으로 크기를 줄여 여러 함수로 코드를 나누는 것** 이좋다.
코드를 분할하고 연결하기 위해서는 다음과 같은 점을 고려해야 한다.
* 함수의 이름에서 기능이 무엇인지 직관적으로 알 수 있어야 한다.
* 분할 된 코드가 들어 있는 피호출자 함수에 반드시 전달되어야 할 정보는 무엇인지 확정(매개변수) 해야 한다.
* 호출자 함수는 피호출 함수를 호출하는 것으로 끝나는 것인지 아니면 반드시 어떤 정보를 반환받아야 하는지 확정(반환 자료형)해야 한다.

**매개변수와 반환 자료형은 두 함수가 서로 만나는 접점**이다.

## 10.3.1 함수의 원형 선언

변수와 함수는 문법적으로 선언(declaration)과 정의(definition)가 분리될 수 있다. 함수 정의보다 함수를 호출하는 코드가 더 먼저 등장하는 경우, '함수의 원형(prototype) 선언'을 소스코드 상단에 기술함으로써 **컴파일러에 함수의 존재를 알려야 한다.**

## 10.3.2 전역변수

전역변수는 특정 블록 스코프에 속하지 않고 소스 파일 전체에 접근할 수 있는 형태로 선언 및 정의된 변수이다. 전역변수는 프록그램이 최초 실행될 때 이미 존재하는 것이며, 프로그램이 끝날 때까지 유지된다.
그러나 전역변수를 오남용 하면 서로 독립적이어야 할 둘을 전역변수를 매개로 묶어버릴 수 있다. 

전역변수를 수정하기라도 하면, 그 변수를 사용하는 함수들은 모두 수정해야 한다.
좋은 설계라는 것은 프로그램을 적절한 단위요소로 나누고 각 요소가 다른 요소의 변화에 영향을 받지 않도록 **의존성**을 낮춰야 한다.

## 10.3.3 전역변수와 식별자 검색 순서 

변수의 이름은 식별자로 사용된다. 따라서 통용범위가 같은 내부에 이름이 같은 두 개의 변수가 있을 수는 없다. 그러나 통용범위가 다르면 이름은 중복될 수 있다.
문법상 허용되는 여러 곳에 선언된 예를 보자.
``` C
#include <stdio.h>
int nInput = 100;

void TestFunc(void) {
	printf("TF:%d\n", nInput);
}

int main(void) {
	int nInput = 0;
	printf("%d\n", nInput);
	{
		int nInput = 20;
		printf("%d\n", nInput);
	}
	TestFunc();
	
	return 1;
}
``` 

전역변수를 사용하는 것 자체가 잘못된 것은 아니다. 또한, 아예 안 쓸 수도 없다. 다만, 전역변수 사용을 신중히 해야 한다. 
예를 들어, 전역변수 이름 앞에 특정 전치사를 붙여 변수의 이름만 보고 젼역변수로 짐작할 수 있게 하기 위해서이다.

C 언어가 변수에 대한 식별자를 검색하는 순서
1. 가장 최근에 형성된 블록 스코프에 속한 지역변수
2. 현재 블록 스코프의 외부를 감싸고 있는 상위 스코프(최대 함수 몸체까지 검색)
3. 파일 스코프(전역변수)

### CutyApple